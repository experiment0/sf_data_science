# Проект 11. Анализ и прогнозирование временного ряда с данными о продажах в сфере розничной торговли и общественного питания в США

## Оглавление

[Описание проекта](https://github.com/experiment0/sf_data_science/blob/main/project_11/README.md#Описание-проекта)\
[Какой кейс решаем?](https://github.com/experiment0/sf_data_science/blob/main/project_11/README.md#Какой-кейс-решаем)\
[Краткая информация о данных](https://github.com/experiment0/sf_data_science/blob/main/project_11/README.md#Краткая-информация-о-данных)\
[Этапы работы над проектом](https://github.com/experiment0/sf_data_science/blob/main/project_11/README.md#Этапы-работы-над-проектом)\
[Описание файлов проекта](https://github.com/experiment0/sf_data_science/blob/main/project_11/README.md#Описание-файлов-проекта)\
[Результат](https://github.com/experiment0/sf_data_science/blob/main/project_11/README.md#Результат)

## Описание проекта

В данном проекте реализован анализ и предсказание значений временного ряда с данными о продажах в сфере розничной торговли и общественного питания в США за 1992-2024 гг., представленных по месяцам.

Порядок проведения операций с временным рядом основан на материалах курса [Профессия Data Scientist](https://skillfactory.ru/data-scientist-pro).

Возник интерес попробовать произвести все описанные там операции над новым рядом, который сочетал бы в себе тренд, сезонность и гетерокседастичность.\
Такой ряд был найден на сайте переписи населения США https://www.census.gov/econ_datasets/ .

## Какой кейс решаем?

Производим исследование и прогнозирование временного ряда с данными
о продажах в сфере розничной торговли и общественного питания в США
за 1992-2024 гг., представленных по месяцам.\
В качестве метрики качества прогноза выбрана `MAPE` (Mean Absolute Percent Error).

## Краткая информация о данных

Таблица с исходными данными взята с сайта переписи населения США: https://www.census.gov/econ_datasets/ \
Из файла с названием: `Monthly Retail Trade and Food Services MRTS-mf.zip`\
Файл содержит данные с ежемесячными отчетами о розничной торговле и общественном питании в США
за 1992-2025 гг. с разбивкой по различным бизнес-категориям.

## Этапы работы над проектом

- Найдены данные для временного ряда и создана таблица с ним.
- Проведено исследование временного ряда.
- Сделан прогноз для последних 12 месяцев.
- Сделан вывод о том, какая модель показала лучшие результаты.

## Описание файлов проекта

- [data](./data/) - Папка, в которой должны находится таблицы. Чтобы не перегружать gihub, они вынесены отдельно https://disk.yandex.ru/d/0pw2ZjdSM68A2A .
- [utils](./utils/) - Папка со вспомогательными функциями и константами, разбитыми по тематическим файлам.
- [create_table.ipynb](./create_table.ipynb) - Файл с кодом создания итоговой таблицы с временным рядом для исследования.
- [time_series.ipynb](./time_series.ipynb) - Файл с основным кодом проекта. Содержит исследование и прогнозирование временного ряда.
- [years_plot.ipynb](./years_plot.ipynb) - Файл содержит вывод графиков продаж за каждый год и вывод о тенденциях изменения продаж за разные месяцы.
- [volatility.ipynb](./volatility.ipynb) - Файл с исследованием гетерокседастичности ряда и построением прогноза волатильности.

## Результат

Для формирования прогноза были использованы две модели - `SARIMA`  и `Prophet`.

Лучший результат по метрики `MAPE` показала модель `SARIMA` - \
`1.86 %` на тестовой выборке и \
`1.78 %` на отложенной валидационной выборке.

При этом предсказание модели `SARIMA` довольно близко повторило график истинных значений.\
Что говорит о том, что модель уловила тенденции изменения данных.

У модели `Prophet` можно отметить удобство использования  \
(не нужно подбирать параметры, модель сама определяет сезонность и тренд). \
`Prophet` показала значение `MAPE` равное `4.37 %` на тестовых данных \
возможно, ей не хватило данных для обучения.

:arrow_up:[к оглавлению](https://github.com/experiment0/sf_data_science/blob/main/project_11/README.md#Оглавление)
